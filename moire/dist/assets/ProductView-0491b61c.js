import{c as k,r as p,x as A,o as i,a as r,b as e,F as w,d as z,u as _,n as P,j as V,f as g,t as $,y as D,z as O,w as y,v as T,i as U,A as M,p as R,s as j,B as q,S as I,h,m as E,k as x}from"./index-4fc75948.js";import{_ as F,S as H}from"./sku-generator-762297f3.js";import{_ as K,P as G}from"./ProductColors-d59583e0.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={class:"item__pics pics"},Q={class:"pics__wrapper"},W=["src","hidden"],X={class:"pics__list"},Y=["src","alt","onClick"],Z={__name:"ProductGallery",props:["colors","selected","loading"],setup(m){const c=m,n=new URL("/moire/assets/no-image-00277bfe.svg",self.location).href,o=k(function(){return c.colors}),l=p(0);A(()=>c.selected,()=>{l.value=c.colors.findIndex(s=>s.id===c.selected)});function t(s){var a;return s?(a=s[0])==null?void 0:a.file.url:n}return(s,a)=>(i(),r("div",J,[e("div",Q,[(i(!0),r(w,null,z(_(o),(u,v)=>(i(),r("img",{key:u.id,width:"570",height:"570",src:t(_(o)[l.value].gallery),alt:"Название товара",ref_for:!0,ref:"img",hidden:l.value!==v},null,8,W))),128))]),e("ul",X,[(i(!0),r(w,null,z(_(o),(u,v)=>(i(),r("li",{key:u.id,class:"pics__item"},[e("a",{href:"",class:P(["pics__link",v===l.value?"pics__link--current":""])},[e("img",{width:"98",height:"98",src:t(u.gallery),alt:u.color.title,onClick:V(C=>l.value=v,["prevent"])},null,8,Y)],2)]))),128))])]))}},ee={class:"item__desc"},te={class:"tabs"},se={class:"tabs__item"},oe={class:"tabs__item"},le=["hidden"],ne=O("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),ae=[ne],ie=["hidden"],ce=e("h3",null,"Доставка:",-1),re=e("p",null,[g(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),g(" 2. Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")],-1),ue=e("h3",null,"Возврат:",-1),de=e("br",null,null,-1),_e=e("br",null,null,-1),me=e("br",null,null,-1),ve={__name:"ProductInfo",setup(m){const c=p("about");function n(l){return c.value===l}function o(l){c.value=l}return(l,t)=>(i(),r("div",ee,[e("ul",te,[e("li",se,[e("a",{class:P(["tabs__link",{"tabs__link--current":n("about")}]),onClick:t[0]||(t[0]=V(s=>o("about"),["prevent"]))}," Информация о товаре ",2)]),e("li",oe,[e("a",{class:P(["tabs__link",{"tabs__link--current":n("delivery")}]),onClick:t[1]||(t[1]=V(s=>o("delivery"),["prevent"]))}," Доставка и возврат ",2)])]),e("div",{class:"item__content",hidden:!n("about")},ae,8,le),e("div",{class:"item__content",hidden:!n("delivery")},[ce,re,ue,e("p",null,[g(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),de,g(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),_e,g(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону "+$(_(D)),1),me])],8,ie)]))}},pe=["value"],he={__name:"ProductSizeSelect",props:["sizeList","modelValue"],emits:["update:modelValue"],setup(m,{emit:c}){const n=m;console.log(n.sizeList);const o=k({get(){return n.modelValue},set(l){c("update:modelValue",l)}});return(l,t)=>y((i(),r("select",{class:"form__select",name:"category","onUpdate:modelValue":t[0]||(t[0]=s=>U(o)?o.value=s:null)},[(i(!0),r(w,null,z(m.sizeList,s=>(i(),r("option",{value:s.id,key:s.id},$(s.title),9,pe))),128))],512)),[[T,_(o)]])}},fe={class:"form__counter"},be={symbol:"icon-minus",size:"12 12"},ge={symbol:"icon-plus",size:"12 12"},$e={__name:"ProductCounter",props:["modelValue"],emits:["update:modelValue"],setup(m,{emit:c}){const n=m,o=k({get(){return n.modelValue},set(s){c("update:modelValue",s)}});function l(){o.value+=1}function t(){o.value!==1&&(o.value-=1)}return(s,a)=>{const u=R("svg");return i(),r("div",fe,[e("button",{type:"button","aria-label":"Убрать один товар",onClick:t},[y((i(),r("svg",be,null,512)),[[u]])]),y(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=v=>U(o)?o.value=v:null),name:"count"},null,512),[[M,_(o)]]),e("button",{type:"button","aria-label":"Добавить один товар",onClick:l},[y((i(),r("svg",ge,null,512)),[[u]])])])}}},ke={class:"content container"},ye={class:"content__top"},Ve={key:1,class:"item"},Ce={class:"item__info"},Se={class:"item__code"},we={class:"item__title"},ze={class:"item__form"},Pe={class:"form",action:"#",method:"POST"},Ie={class:"item__row item__row--center"},xe={class:"item__price"},Ue={class:"item__row"},Be={class:"form__block"},Le=e("legend",{class:"form__legend"},"Цвет",-1),Ne={class:"form__block"},Ae=e("legend",{class:"form__legend"},"Размер",-1),De={class:"form__label form__label--small form__label--select"},Oe=["onClick"],qe={__name:"ProductView",emits:["loadingStart","loadingComplete"],setup(m,{emit:c}){const n=j(),o=q(),l=p(!0),t=p({}),s=p(),a=p(),u=p(1),v=k(()=>t.value&&a.value&&s.value?new H({id:t.value.id,color:a.value,size:s.value}):""),C=p([]),S=k(function(){return t.value.colors||[]});B();async function B(){l.value=!0,c("loadingStart"),t.value=await I.getProductById(n.params.id),C.value=[{title:"Каталог",route:{name:"main"}},{title:t.value.category.title,route:{name:"products",query:{categoryId:t.value.category.id}}},{title:t.value.title,route:{path:"#"}}],s.value=t.value.sizes[0].id,a.value=t.value.colors[0].id,console.log("color",a.value),n.meta.title=t.value.title,document.title=n.meta.title,l.value=!1,c("loadingComplete")}function L(){var f;I.addProductToBasket({productId:t.value.id,colorId:N(a.value),sizeId:s.value,quantity:u.value},(f=o.user)==null?void 0:f.accessKey).then(d=>{Object.assign(o.cart,d),o.user=o.cart.user})}function N(f){return S.value.find(d=>d.id===f).color.id}return(f,d)=>(i(),r("main",ke,[e("div",ye,[h(F,{links:C.value},null,8,["links"])]),l.value?(i(),E(G,{key:0})):x("",!0),l.value?x("",!0):(i(),r("section",Ve,[h(Z,{colors:_(S),selected:a.value,loading:l.value},null,8,["colors","selected","loading"]),e("div",Ce,[e("span",Se,"Артикул: "+$(_(v)),1),e("h2",we,$(t.value.title),1),e("div",ze,[e("form",Pe,[e("div",Ie,[h($e,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=b=>u.value=b)},null,8,["modelValue"]),e("b",xe,$(t.value.price)+" ₽ ",1)]),e("div",Ue,[e("fieldset",Be,[Le,h(K,{colors:_(S),modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=b=>a.value=b)},null,8,["colors","modelValue"])]),e("fieldset",Ne,[Ae,e("label",De,[h(he,{"size-list":t.value.sizes,modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=b=>s.value=b)},null,8,["size-list","modelValue"])])])]),e("button",{class:"item__button button button--primery",type:"submit",onClick:V(L,["prevent"])}," В корзину ",8,Oe)])])]),h(ve)]))]))}};export{qe as default};
