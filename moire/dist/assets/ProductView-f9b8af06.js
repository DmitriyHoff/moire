import{c as y,r as v,x as A,o as i,a as r,b as e,F as S,d as w,u as _,n as z,j as V,f as b,t as g,y as D,z as O,w as k,v as T,i as B,A as M,p as j,s as q,B as E,S as x,h,m as F,k as U}from"./index-508ef474.js";import{_ as H,S as R}from"./sku-generator-65586f94.js";import{_ as G,P as J}from"./ProductColors-aa63be58.js";import{n as Q}from"./no-image-7601bee4.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={class:"item__pics pics"},X={class:"pics__wrapper"},Y=["src","hidden"],Z={class:"pics__list"},ee=["src","alt","onClick"],te={__name:"ProductGallery",props:["colors","selected","loading"],setup(m){const c=m,n=y(function(){return c.colors}),s=v(0);A(()=>c.selected,()=>{s.value=c.colors.findIndex(t=>t.id===c.selected)});function l(t){var o;return t?(o=t[0])==null?void 0:o.file.url:Q}return(t,o)=>(i(),r("div",W,[e("div",X,[(i(!0),r(S,null,w(_(n),(a,u)=>(i(),r("img",{key:a.id,width:"570",height:"570",src:l(_(n)[s.value].gallery),alt:"Название товара",ref_for:!0,ref:"img",hidden:s.value!==u},null,8,Y))),128))]),e("ul",Z,[(i(!0),r(S,null,w(_(n),(a,u)=>(i(),r("li",{key:a.id,class:"pics__item"},[e("a",{href:"",class:z(["pics__link",u===s.value?"pics__link--current":""])},[e("img",{width:"98",height:"98",src:l(a.gallery),alt:a.color.title,onClick:V($=>s.value=u,["prevent"])},null,8,ee)],2)]))),128))])]))}},se={class:"item__desc"},oe={class:"tabs"},le={class:"tabs__item"},ne={class:"tabs__item"},ae=["hidden"],ie=O("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),ce=[ie],re=["hidden"],ue=e("h3",null,"Доставка:",-1),de=e("p",null,[b(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),b(" 2. Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")],-1),_e=e("h3",null,"Возврат:",-1),me=e("br",null,null,-1),ve=e("br",null,null,-1),pe=e("br",null,null,-1),he={__name:"ProductInfo",setup(m){const c=v("about");function n(l){return c.value===l}function s(l){c.value=l}return(l,t)=>(i(),r("div",se,[e("ul",oe,[e("li",le,[e("a",{class:z(["tabs__link",{"tabs__link--current":n("about")}]),onClick:t[0]||(t[0]=V(o=>s("about"),["prevent"]))}," Информация о товаре ",2)]),e("li",ne,[e("a",{class:z(["tabs__link",{"tabs__link--current":n("delivery")}]),onClick:t[1]||(t[1]=V(o=>s("delivery"),["prevent"]))}," Доставка и возврат ",2)])]),e("div",{class:"item__content",hidden:!n("about")},ce,8,ae),e("div",{class:"item__content",hidden:!n("delivery")},[ue,de,_e,e("p",null,[b(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),me,b(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),ve,b(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону "+g(_(D)),1),pe])],8,re)]))}},fe=["value"],be={__name:"ProductSizeSelect",props:["sizeList","modelValue"],emits:["update:modelValue"],setup(m,{emit:c}){const n=m;console.log(n.sizeList);const s=y({get(){return n.modelValue},set(l){c("update:modelValue",l)}});return(l,t)=>k((i(),r("select",{class:"form__select",name:"category","onUpdate:modelValue":t[0]||(t[0]=o=>B(s)?s.value=o:null)},[(i(!0),r(S,null,w(m.sizeList,o=>(i(),r("option",{value:o.id,key:o.id},g(o.title),9,fe))),128))],512)),[[T,_(s)]])}},ge={class:"form__counter"},ye={symbol:"icon-minus",size:"12 12"},$e={symbol:"icon-plus",size:"12 12"},ke={__name:"ProductCounter",props:["modelValue"],emits:["update:modelValue"],setup(m,{emit:c}){const n=m,s=y({get(){return n.modelValue},set(o){c("update:modelValue",o)}});function l(){s.value+=1}function t(){s.value!==1&&(s.value-=1)}return(o,a)=>{const u=j("svg");return i(),r("div",ge,[e("button",{type:"button","aria-label":"Убрать один товар",onClick:t},[k((i(),r("svg",ye,null,512)),[[u]])]),k(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=$=>B(s)?s.value=$:null),name:"count"},null,512),[[M,_(s)]]),e("button",{type:"button","aria-label":"Добавить один товар",onClick:l},[k((i(),r("svg",$e,null,512)),[[u]])])])}}},Ve={class:"content container"},Ce={class:"content__top"},Se={key:1,class:"item"},we={class:"item__info"},ze={class:"item__code"},Pe={class:"item__title"},Ie={class:"item__form"},xe={class:"form",action:"#",method:"POST"},Ue={class:"item__row item__row--center"},Be={class:"item__price"},Ke={class:"item__row"},Ne={class:"form__block"},Le=e("legend",{class:"form__legend"},"Цвет",-1),Ae={class:"form__block"},De=e("legend",{class:"form__legend"},"Размер",-1),Oe={class:"form__label form__label--small form__label--select"},Te=["onClick"],He={__name:"ProductView",emits:["loadingStart","loadingComplete"],setup(m,{emit:c}){const n=q(),s=E(),l=v(!0),t=v({}),o=v(),a=v(),u=v(1),$=y(()=>t.value&&a.value&&o.value?new R({id:t.value.id,color:a.value,size:o.value}):""),P=v([]),C=y(function(){return t.value.colors||[]});K();async function K(){l.value=!0,c("loadingStart"),t.value=await x.getProductById(n.params.id),P.value=[{title:"Каталог",route:{name:"main"}},{title:t.value.category.title,route:{name:"products",query:{categoryId:t.value.category.id}}},{title:t.value.title,route:{path:"#"}}],o.value=t.value.sizes[0].id,a.value=t.value.colors[0].id,console.log("color",a.value),n.meta.title=t.value.title,document.title=n.meta.title,l.value=!1,c("loadingComplete")}function N(){var f,d;console.log("add_amount",u.value),console.log("accessKey:",(f=s.user)==null?void 0:f.accessKey),x.addProductToBasket({productId:t.value.id,colorId:L(a.value),sizeId:o.value,quantity:u.value},(d=s.getUser())==null?void 0:d.accessKey).then(p=>{var I;Object.assign(s.cart,p),console.log("store.cart.user:",s.cart.user),s.setUser(s.cart.user),console.log("store.user:",s.getUser()),console.log("accessKey:",(I=s.getUser())==null?void 0:I.accessKey)})}function L(f){return C.value.find(d=>d.id===f).color.id}return(f,d)=>(i(),r("main",Ve,[e("div",Ce,[h(H,{links:P.value},null,8,["links"])]),l.value?(i(),F(J,{key:0})):U("",!0),l.value?U("",!0):(i(),r("section",Se,[h(te,{colors:_(C),selected:a.value,loading:l.value},null,8,["colors","selected","loading"]),e("div",we,[e("span",ze,"Артикул: "+g(_($)),1),e("h2",Pe,g(t.value.title),1),e("div",Ie,[e("form",xe,[e("div",Ue,[h(ke,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=p=>u.value=p)},null,8,["modelValue"]),e("b",Be,g(t.value.price)+" ₽ ",1)]),e("div",Ke,[e("fieldset",Ne,[Le,h(G,{colors:_(C),modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=p=>a.value=p)},null,8,["colors","modelValue"])]),e("fieldset",Ae,[De,e("label",Oe,[h(be,{"size-list":t.value.sizes,modelValue:o.value,"onUpdate:modelValue":d[2]||(d[2]=p=>o.value=p)},null,8,["size-list","modelValue"])])])]),e("button",{class:"item__button button button--primery",type:"submit",onClick:V(N,["prevent"])}," В корзину ",8,Te)])])]),h(he)]))]))}};export{He as default};
