import{c as V,r as v,p as D,o as a,a as u,b as e,F as P,d as z,u as p,w as k,x as O,s as C,k as S,f as g,t as y,B as T,C as A,D as R,i as j,y as q,h as E,m as F,S as B,j as b,l as I,z as H}from"./index-5d325d4a.js";import{_ as M}from"./BreadcrumbTrail-736d7fb2.js";import{a as G,_ as K}from"./ProductSizeSelect-1468a121.js";import{n as W}from"./no-image-7601bee4.js";import{t as J}from"./sku-generator-acc5bf01.js";const Q={class:"item__pics pics"},X={class:"pics__wrapper"},Y=["src","hidden"],Z={class:"lds-spinner"},ee=e("div",null,null,-1),te=e("div",null,null,-1),se=e("div",null,null,-1),oe=e("div",null,null,-1),le=e("div",null,null,-1),ne=e("div",null,null,-1),ie=e("div",null,null,-1),ae=e("div",null,null,-1),ce=e("div",null,null,-1),ue=e("div",null,null,-1),_e=e("div",null,null,-1),re=e("div",null,null,-1),de=[ee,te,se,oe,le,ne,ie,ae,ce,ue,_e,re],ve={class:"pics__list"},me=["src","alt","onClick"],pe={__name:"ProductGallery",props:["colors","selected","loading"],setup(m){const n=m,i=V(function(){return n.colors}),s=v(0);D(()=>n.selected,()=>{s.value=n.colors.findIndex(l=>l.id===n.selected)});function o(l){var _;return l?(_=l[0])==null?void 0:_.file.url:W}const t=v(!1);function c(){t.value=!0}return(l,_)=>(a(),u("div",Q,[e("div",X,[(a(!0),u(P,null,z(p(i),(r,h)=>(a(),u("img",{key:r.id,width:"570",height:"570",src:o(p(i)[s.value].gallery),alt:"Название товара",ref_for:!0,ref:"img",hidden:s.value!==h,onLoad:c},null,40,Y))),128)),k(e("div",Z,de,512),[[O,!t.value]])]),e("ul",ve,[(a(!0),u(P,null,z(p(i),(r,h)=>(a(),u("li",{key:r.id,class:"pics__item"},[e("a",{href:"",class:C(["pics__link",h===s.value?"pics__link--current":""])},[e("img",{class:"pics__image",width:"98",height:"98",src:o(r.gallery),alt:r.color.title,onClick:S(w=>s.value=h,["prevent"])},null,8,me)],2)]))),128))])]))}},he={class:"item__desc"},fe={class:"tabs"},be={class:"tabs__item"},$e={class:"tabs__item"},ge=["hidden"],ke=A("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),ye=[ke],Ve=["hidden"],Ce=e("h3",null,"Доставка:",-1),Se=e("p",null,[g(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),g(" 2. Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")],-1),we=e("h3",null,"Возврат:",-1),xe=e("br",null,null,-1),Ie=e("br",null,null,-1),Pe=e("br",null,null,-1),ze={__name:"ProductInfo",setup(m){const n=v("about");function i(o){return n.value===o}function s(o){n.value=o}return(o,t)=>(a(),u("div",he,[e("ul",fe,[e("li",be,[e("a",{class:C(["tabs__link",{"tabs__link--current":i("about")}]),onClick:t[0]||(t[0]=S(c=>s("about"),["prevent"]))}," Информация о товаре ",2)]),e("li",$e,[e("a",{class:C(["tabs__link",{"tabs__link--current":i("delivery")}]),onClick:t[1]||(t[1]=S(c=>s("delivery"),["prevent"]))}," Доставка и возврат ",2)])]),e("div",{class:"item__content",hidden:!i("about")},ye,8,ge),e("div",{class:"item__content",hidden:!i("delivery")},[Ce,Se,we,e("p",null,[g(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),xe,g(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),Ie,g(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону "+y(p(T)),1),Pe])],8,Ve)]))}},Be={class:"form__counter"},Ue={symbol:"icon-minus",size:"12 12"},Le={symbol:"icon-plus",size:"12 12"},Ne={__name:"ProductCounter",props:["modelValue"],emits:["update:modelValue"],setup(m,{emit:n}){const i=m,s=V({get(){return i.modelValue},set(c){n("update:modelValue",c)}});function o(){s.value+=1}function t(){s.value!==1&&(s.value-=1)}return(c,l)=>{const _=q("svg");return a(),u("div",Be,[e("button",{type:"button","aria-label":"Убрать один товар",onClick:t},[k((a(),u("svg",Ue,null,512)),[[_]])]),k(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=r=>j(s)?s.value=r:null),name:"count"},null,512),[[R,p(s)]]),e("button",{type:"button","aria-label":"Добавить один товар",onClick:o},[k((a(),u("svg",Le,null,512)),[[_]])])])}}};const De=(m,n)=>{const i=m.__vccOpts||m;for(const[s,o]of n)i[s]=o;return i},Oe={},Te={class:"loader-wrap"},Ae=e("span",{class:"loader"},null,-1),Re=[Ae];function je(m,n){return a(),u("div",Te,Re)}const qe=De(Oe,[["render",je]]),Ee={class:"content container"},Fe={key:0,class:"content__top"},He={key:2,class:"item"},Me={class:"item__info"},Ge={class:"item__code"},Ke={class:"item__title"},We={class:"item__form"},Je={class:"form",action:"#",method:"POST"},Qe={class:"item__row item__row--center"},Xe={class:"item__price"},Ye={class:"item__row"},Ze={class:"form__block"},et=e("legend",{class:"form__legend"},"Цвет",-1),tt={class:"form__block"},st=e("legend",{class:"form__legend"},"Размер",-1),ot={class:"form__label form__label--small form__label--select"},lt=["onClick"],nt=e("span",{class:"button__text"},"В корзину",-1),it=[nt],dt={__name:"ProductView",props:["title"],emits:["loadingStart","loadingComplete"],setup(m,{emit:n}){const i=E(),s=F(),o=v(!0),t=v({}),c=v(),l=v(),_=v(1),r=v(!1),h=V(()=>t.value&&l.value&&c.value?J({id:t.value.id,color:l.value,size:c.value}):""),w=v([]),x=V(function(){return t.value.colors||[]});U();async function U(){o.value=!0,n("loadingStart"),t.value=await B.getProductById(i.params.id),w.value=[{title:"Каталог",route:{name:"main"}},{title:t.value.category.title,route:{name:"products",query:{categoryId:t.value.category.id},props:[{title:t.value.category.title}]}},{title:t.value.title,route:{path:"#"}}],c.value=t.value.sizes[0].id,l.value=t.value.colors[0].id,o.value=!1,n("loadingComplete")}function L(){var f;r.value=!0,B.addProductToBasket({productId:t.value.id,colorId:N(l.value),sizeId:c.value,quantity:_.value},(f=s.getUser())==null?void 0:f.accessKey).then(d=>{Object.assign(s.cart,d),s.setUser(s.cart.user),r.value=!1})}function N(f){return x.value.find(d=>d.id===f).color.id}return(f,d)=>(a(),u("main",Ee,[o.value?I("",!0):(a(),u("div",Fe,[b(M,{links:w.value},null,8,["links"])])),o.value?(a(),H(qe,{key:1})):I("",!0),o.value?I("",!0):(a(),u("section",He,[b(pe,{colors:p(x),selected:l.value,loading:o.value},null,8,["colors","selected","loading"]),e("div",Me,[e("span",Ge,"Артикул: "+y(p(h)),1),e("h2",Ke,y(t.value.title),1),e("div",We,[e("form",Je,[e("div",Qe,[b(Ne,{modelValue:_.value,"onUpdate:modelValue":d[0]||(d[0]=$=>_.value=$)},null,8,["modelValue"]),e("b",Xe,y(f.$format.currRUB(t.value.price*_.value)),1)]),e("div",Ye,[e("fieldset",Ze,[et,b(G,{colors:p(x),modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=$=>l.value=$)},null,8,["colors","modelValue"])]),e("fieldset",tt,[st,e("label",ot,[b(K,{"size-list":t.value.sizes,modelValue:c.value,"onUpdate:modelValue":d[2]||(d[2]=$=>c.value=$)},null,8,["size-list","modelValue"])])])]),e("button",{class:C(["item__button button button--primery",r.value?"button--loading":""]),type:"submit",onClick:S(L,["prevent"])},it,10,lt)])])]),b(ze)]))]))}};export{dt as default};
