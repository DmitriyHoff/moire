import{c as V,r as m,y as D,o as i,a as u,b as e,F as z,d as x,u as v,w as g,n as O,q as C,k as S,f as k,t as y,z as T,A as q,v as M,i as B,B as R,s as j,h as E,C as F,S as U,j as b,l as P,p as H}from"./index-ffbe57d3.js";import{_ as K}from"./BreadcrumbTrail-467ca9df.js";import{_ as G,P as W}from"./ProductColors-b7780fdc.js";import{n as J}from"./no-image-7601bee4.js";import{S as Q}from"./sku-generator-e3173cad.js";const X={class:"item__pics pics"},Y={class:"pics__wrapper"},Z=["src","hidden"],ee={class:"lds-spinner"},te=e("div",null,null,-1),se=e("div",null,null,-1),le=e("div",null,null,-1),oe=e("div",null,null,-1),ne=e("div",null,null,-1),ae=e("div",null,null,-1),ie=e("div",null,null,-1),ue=e("div",null,null,-1),ce=e("div",null,null,-1),re=e("div",null,null,-1),de=e("div",null,null,-1),_e=e("div",null,null,-1),me=[te,se,le,oe,ne,ae,ie,ue,ce,re,de,_e],ve={class:"pics__list"},pe=["src","alt","onClick"],he={__name:"ProductGallery",props:["colors","selected","loading"],setup(p){const c=p,n=V(function(){return c.colors}),s=m(0);D(()=>c.selected,()=>{s.value=c.colors.findIndex(a=>a.id===c.selected)});function l(a){var r;return a?(r=a[0])==null?void 0:r.file.url:J}const t=m(!1);function o(){t.value=!0}return(a,r)=>(i(),u("div",X,[e("div",Y,[(i(!0),u(z,null,x(v(n),(d,h)=>(i(),u("img",{key:d.id,width:"570",height:"570",src:l(v(n)[s.value].gallery),alt:"Название товара",ref_for:!0,ref:"img",hidden:s.value!==h,onLoad:o},null,40,Z))),128)),g(e("div",ee,me,512),[[O,!t.value]])]),e("ul",ve,[(i(!0),u(z,null,x(v(n),(d,h)=>(i(),u("li",{key:d.id,class:"pics__item"},[e("a",{href:"",class:C(["pics__link",h===s.value?"pics__link--current":""])},[e("img",{class:"pics__image",width:"98",height:"98",src:l(d.gallery),alt:d.color.title,onClick:S(w=>s.value=h,["prevent"])},null,8,pe)],2)]))),128))])]))}},fe={class:"item__desc"},be={class:"tabs"},$e={class:"tabs__item"},ge={class:"tabs__item"},ke=["hidden"],ye=q("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),Ve=[ye],Ce=["hidden"],Se=e("h3",null,"Доставка:",-1),we=e("p",null,[k(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),k(" 2. Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")],-1),Ie=e("h3",null,"Возврат:",-1),Pe=e("br",null,null,-1),ze=e("br",null,null,-1),xe=e("br",null,null,-1),Ue={__name:"ProductInfo",setup(p){const c=m("about");function n(l){return c.value===l}function s(l){c.value=l}return(l,t)=>(i(),u("div",fe,[e("ul",be,[e("li",$e,[e("a",{class:C(["tabs__link",{"tabs__link--current":n("about")}]),onClick:t[0]||(t[0]=S(o=>s("about"),["prevent"]))}," Информация о товаре ",2)]),e("li",ge,[e("a",{class:C(["tabs__link",{"tabs__link--current":n("delivery")}]),onClick:t[1]||(t[1]=S(o=>s("delivery"),["prevent"]))}," Доставка и возврат ",2)])]),e("div",{class:"item__content",hidden:!n("about")},Ve,8,ke),e("div",{class:"item__content",hidden:!n("delivery")},[Se,we,Ie,e("p",null,[k(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),Pe,k(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),ze,k(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону "+y(v(T)),1),xe])],8,Ce)]))}},Be=["value"],Le={__name:"ProductSizeSelect",props:["sizeList","modelValue"],emits:["update:modelValue"],setup(p,{emit:c}){const n=p,s=V({get(){return n.modelValue},set(l){c("update:modelValue",l)}});return(l,t)=>g((i(),u("select",{class:"form__select",name:"category","onUpdate:modelValue":t[0]||(t[0]=o=>B(s)?s.value=o:null)},[(i(!0),u(z,null,x(p.sizeList,o=>(i(),u("option",{value:o.id,key:o.id},y(o.title),9,Be))),128))],512)),[[M,v(s)]])}},Ne={class:"form__counter"},Ae={symbol:"icon-minus",size:"12 12"},De={symbol:"icon-plus",size:"12 12"},Oe={__name:"ProductCounter",props:["modelValue"],emits:["update:modelValue"],setup(p,{emit:c}){const n=p,s=V({get(){return n.modelValue},set(o){c("update:modelValue",o)}});function l(){s.value+=1}function t(){s.value!==1&&(s.value-=1)}return(o,a)=>{const r=j("svg");return i(),u("div",Ne,[e("button",{type:"button","aria-label":"Убрать один товар",onClick:t},[g((i(),u("svg",Ae,null,512)),[[r]])]),g(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=d=>B(s)?s.value=d:null),name:"count"},null,512),[[R,v(s)]]),e("button",{type:"button","aria-label":"Добавить один товар",onClick:l},[g((i(),u("svg",De,null,512)),[[r]])])])}}},Te={class:"content container"},qe={key:0,class:"content__top"},Me={key:2,class:"item"},Re={class:"item__info"},je={class:"item__code"},Ee={class:"item__title"},Fe={class:"item__form"},He={class:"form",action:"#",method:"POST"},Ke={class:"item__row item__row--center"},Ge={class:"item__price"},We={class:"item__row"},Je={class:"form__block"},Qe=e("legend",{class:"form__legend"},"Цвет",-1),Xe={class:"form__block"},Ye=e("legend",{class:"form__legend"},"Размер",-1),Ze={class:"form__label form__label--small form__label--select"},et=["onClick"],tt=e("span",{class:"button__text"},"В корзину",-1),st=[tt],ut={__name:"ProductView",emits:["loadingStart","loadingComplete"],setup(p,{emit:c}){const n=E(),s=F(),l=m(!0),t=m({}),o=m(),a=m(),r=m(1),d=m(!1),h=V(()=>t.value&&a.value&&o.value?Q.get({id:t.value.id,color:a.value,size:o.value}):""),w=m([]),I=V(function(){return t.value.colors||[]});L();async function L(){l.value=!0,c("loadingStart"),t.value=await U.getProductById(n.params.id),w.value=[{title:"Каталог",route:{name:"main"}},{title:t.value.category.title,route:{name:"products",query:{categoryId:t.value.category.id},meta:{title:t.value.category.title}}},{title:t.value.title,route:{path:"#"}}],o.value=t.value.sizes[0].id,a.value=t.value.colors[0].id,n.meta.title=t.value.title,document.title=n.meta.title,l.value=!1,c("loadingComplete")}function N(){var f;d.value=!0,U.addProductToBasket({productId:t.value.id,colorId:A(a.value),sizeId:o.value,quantity:r.value},(f=s.getUser())==null?void 0:f.accessKey).then(_=>{console.log(_),Object.assign(s.cart,_),s.setUser(s.cart.user),d.value=!1})}function A(f){return I.value.find(_=>_.id===f).color.id}return(f,_)=>(i(),u("main",Te,[l.value?P("",!0):(i(),u("div",qe,[b(K,{links:w.value},null,8,["links"])])),l.value?(i(),H(W,{key:1})):P("",!0),l.value?P("",!0):(i(),u("section",Me,[b(he,{colors:v(I),selected:a.value,loading:l.value},null,8,["colors","selected","loading"]),e("div",Re,[e("span",je,"Артикул: "+y(v(h)),1),e("h2",Ee,y(t.value.title),1),e("div",Fe,[e("form",He,[e("div",Ke,[b(Oe,{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=$=>r.value=$)},null,8,["modelValue"]),e("b",Ge,y(f.$format.currRUB(t.value.price*r.value)),1)]),e("div",We,[e("fieldset",Je,[Qe,b(G,{colors:v(I),modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=$=>a.value=$)},null,8,["colors","modelValue"])]),e("fieldset",Xe,[Ye,e("label",Ze,[b(Le,{"size-list":t.value.sizes,modelValue:o.value,"onUpdate:modelValue":_[2]||(_[2]=$=>o.value=$)},null,8,["size-list","modelValue"])])])]),e("button",{class:C(["item__button button button--primery",d.value?"button--loading":""]),type:"submit",onClick:S(N,["prevent"])},st,10,et)])])]),b(Ue)]))]))}};export{ut as default};
