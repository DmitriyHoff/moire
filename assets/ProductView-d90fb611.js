import{c as V,r as m,n as A,o as u,a as _,b as e,F as z,d as B,u as h,w as k,s as D,q as C,k as S,f as g,t as y,A as T,B as q,C as R,i as j,x as E,h as F,m as H,S as U,j as b,l as x,y as M}from"./index-ac058e46.js";import{_ as G}from"./BreadcrumbTrail-18669e36.js";import{a as K,_ as W}from"./ProductSizeSelect-5514f000.js";import{n as J}from"./no-image-7601bee4.js";import{t as Q}from"./sku-generator-acc5bf01.js";const X={class:"item__pics pics"},Y={class:"pics__wrapper"},Z=["src","hidden"],ee={class:"lds-spinner"},te=e("div",null,null,-1),se=e("div",null,null,-1),oe=e("div",null,null,-1),le=e("div",null,null,-1),ne=e("div",null,null,-1),ie=e("div",null,null,-1),ae=e("div",null,null,-1),ce=e("div",null,null,-1),ue=e("div",null,null,-1),_e=e("div",null,null,-1),re=e("div",null,null,-1),de=e("div",null,null,-1),ve=[te,se,oe,le,ne,ie,ae,ce,ue,_e,re,de],me={class:"pics__list"},pe=["src","alt","onClick"],he={__name:"ProductGallery",props:["colors","selected","loading"],setup(v){const n=v,i=V(function(){return n.colors}),s=m(0);A(()=>n.selected,()=>{s.value=n.colors.findIndex(a=>a.id===n.selected)});function o(a){var c;return a?(c=a[0])==null?void 0:c.file.url:J}const l=m(!1);function t(){l.value=!0}return(a,c)=>(u(),_("div",X,[e("div",Y,[(u(!0),_(z,null,B(h(i),(r,p)=>(u(),_("img",{key:r.id,width:"570",height:"570",src:o(h(i)[s.value].gallery),alt:"Название товара",ref_for:!0,ref:"img",hidden:s.value!==p,onLoad:t},null,40,Z))),128)),k(e("div",ee,ve,512),[[D,!l.value]])]),e("ul",me,[(u(!0),_(z,null,B(h(i),(r,p)=>(u(),_("li",{key:r.id,class:"pics__item"},[e("a",{href:"",class:C(["pics__link",p===s.value?"pics__link--current":""])},[e("img",{class:"pics__image",width:"98",height:"98",src:o(r.gallery),alt:r.color.title,onClick:S(I=>s.value=p,["prevent"])},null,8,pe)],2)]))),128))])]))}},fe={class:"item__desc"},be={class:"tabs"},$e={class:"tabs__item"},ge={class:"tabs__item"},ke=["hidden"],ye=q("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),Ve=[ye],Ce=["hidden"],Se=e("h3",null,"Доставка:",-1),we=e("p",null,[g(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),g(" 2. Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")],-1),xe=e("h3",null,"Возврат:",-1),Ie=e("br",null,null,-1),Pe=e("br",null,null,-1),ze=e("br",null,null,-1),Be={__name:"ProductInfo",setup(v){const n=m("about");function i(o){return n.value===o}function s(o){n.value=o}return(o,l)=>(u(),_("div",fe,[e("ul",be,[e("li",$e,[e("a",{class:C(["tabs__link",{"tabs__link--current":i("about")}]),onClick:l[0]||(l[0]=S(t=>s("about"),["prevent"]))}," Информация о товаре ",2)]),e("li",ge,[e("a",{class:C(["tabs__link",{"tabs__link--current":i("delivery")}]),onClick:l[1]||(l[1]=S(t=>s("delivery"),["prevent"]))}," Доставка и возврат ",2)])]),e("div",{class:"item__content",hidden:!i("about")},Ve,8,ke),e("div",{class:"item__content",hidden:!i("delivery")},[Se,we,xe,e("p",null,[g(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),Ie,g(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),Pe,g(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону "+y(h(T)),1),ze])],8,Ce)]))}},Ue={class:"form__counter"},Le={symbol:"icon-minus",size:"12 12"},Ne={symbol:"icon-plus",size:"12 12"},Oe={__name:"ProductCounter",props:["modelValue"],emits:["update:modelValue"],setup(v,{emit:n}){const i=v,s=V({get(){return i.modelValue},set(t){n("update:modelValue",t)}});function o(){s.value+=1}function l(){s.value!==1&&(s.value-=1)}return(t,a)=>{const c=E("svg");return u(),_("div",Ue,[e("button",{type:"button","aria-label":"Убрать один товар",onClick:l},[k((u(),_("svg",Le,null,512)),[[c]])]),k(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=r=>j(s)?s.value=r:null),name:"count"},null,512),[[R,h(s)]]),e("button",{type:"button","aria-label":"Добавить один товар",onClick:o},[k((u(),_("svg",Ne,null,512)),[[c]])])])}}};const Ae=(v,n)=>{const i=v.__vccOpts||v;for(const[s,o]of n)i[s]=o;return i},De={},Te={class:"loader-wrap"},qe=e("span",{class:"loader"},null,-1),Re=[qe];function je(v,n){return u(),_("div",Te,Re)}const Ee=Ae(De,[["render",je]]),Fe={class:"content container"},He={key:0,class:"content__top"},Me={key:2,class:"item"},Ge={class:"item__info"},Ke={class:"item__code"},We={class:"item__title"},Je={class:"item__form"},Qe={class:"form",action:"#",method:"POST"},Xe={class:"item__row item__row--center"},Ye={class:"item__price"},Ze={class:"item__row"},et={class:"form__block"},tt=e("legend",{class:"form__legend"},"Цвет",-1),st={class:"form__block"},ot=e("legend",{class:"form__legend"},"Размер",-1),lt={class:"form__label form__label--small form__label--select"},nt=["onClick"],it=e("span",{class:"button__text"},"В корзину",-1),at=[it],vt={__name:"ProductView",props:["title"],emits:["loadingStart","loadingComplete"],setup(v,{emit:n}){const i=v,s=F(),o=H(),l=m(!0),t=m({}),a=m(),c=m(),r=m(1),p=m(!1),I=V(()=>t.value&&c.value&&a.value?Q({id:t.value.id,color:c.value,size:a.value}):""),P=m([]),w=V(function(){return t.value.colors||[]});L();async function L(){console.log(i.title),l.value=!0,n("loadingStart"),t.value=await U.getProductById(s.params.id),P.value=[{title:"Каталог",route:{name:"main"}},{title:t.value.category.title,route:{name:"products",query:{categoryId:t.value.category.id},props:[{title:t.value.category.title}]}},{title:t.value.title,route:{path:"#"}}],a.value=t.value.sizes[0].id,c.value=t.value.colors[0].id,l.value=!1,n("loadingComplete")}function N(){var f;p.value=!0,U.addProductToBasket({productId:t.value.id,colorId:O(c.value),sizeId:a.value,quantity:r.value},(f=o.getUser())==null?void 0:f.accessKey).then(d=>{console.log(d),Object.assign(o.cart,d),o.setUser(o.cart.user),p.value=!1})}function O(f){return w.value.find(d=>d.id===f).color.id}return(f,d)=>(u(),_("main",Fe,[l.value?x("",!0):(u(),_("div",He,[b(G,{links:P.value},null,8,["links"])])),l.value?(u(),M(Ee,{key:1})):x("",!0),l.value?x("",!0):(u(),_("section",Me,[b(he,{colors:h(w),selected:c.value,loading:l.value},null,8,["colors","selected","loading"]),e("div",Ge,[e("span",Ke,"Артикул: "+y(h(I)),1),e("h2",We,y(t.value.title),1),e("div",Je,[e("form",Qe,[e("div",Xe,[b(Oe,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=$=>r.value=$)},null,8,["modelValue"]),e("b",Ye,y(f.$format.currRUB(t.value.price*r.value)),1)]),e("div",Ze,[e("fieldset",et,[tt,b(K,{colors:h(w),modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=$=>c.value=$)},null,8,["colors","modelValue"])]),e("fieldset",st,[ot,e("label",lt,[b(W,{"size-list":t.value.sizes,modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=$=>a.value=$)},null,8,["size-list","modelValue"])])])]),e("button",{class:C(["item__button button button--primery",p.value?"button--loading":""]),type:"submit",onClick:S(N,["prevent"])},at,10,nt)])])]),b(Be)]))]))}};export{vt as default};
