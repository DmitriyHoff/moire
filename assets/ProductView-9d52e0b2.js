var D=Object.defineProperty;var O=(r,l,o)=>l in r?D(r,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[l]=o;var y=(r,l,o)=>(O(r,typeof l!="symbol"?l+"":l,o),o);import{o as i,a as c,F as S,d as C,m as B,l as R,t as p,y as M,f as b,c as k,r as v,x as j,b as e,u as m,n as x,j as z,z as q,A as E,w as V,v as F,i as L,B as H,p as K,C as G,s as J,S as P,h,k as I}from"./index-2789c03f.js";import{_ as Q,P as W}from"./ProductColors-5f1cc4a1.js";const X={class:"breadcrumbs"},Y={key:1,class:"breadcrumbs__link",style:{"pointer-events":"none"}},Z={__name:"BreadcrumbTrail",props:["links"],setup(r){return(l,o)=>{const s=M("RouterLink");return i(),c("ul",X,[(i(!0),c(S,null,C(r.links,(t,n)=>(i(),c("li",{class:"breadcrumbs__item",key:t.title},[n<r.links.length-1?(i(),B(s,{key:0,class:"breadcrumbs__link",to:t.route},{default:R(()=>[b(p(t.title),1)]),_:2},1032,["to"])):(i(),c("span",Y,p(t.title),1))]))),128))])}}},ee={class:"item__pics pics"},te={class:"pics__wrapper"},se=["src","hidden"],oe={class:"pics__list"},le=["src","alt","onClick"],ne={__name:"ProductGallery",props:["colors","selected","loading"],setup(r){const l=r,o=k(function(){return l.colors}),s=v(0);j(()=>l.selected,()=>{s.value=l.colors.findIndex(n=>n.id===l.selected)});function t(n){var a;return n?(a=n[0])==null?void 0:a.file.url:"/src/assets/no-image.svg"}return(n,a)=>(i(),c("div",ee,[e("div",te,[(i(!0),c(S,null,C(m(o),(u,d)=>(i(),c("img",{key:u.id,width:"570",height:"570",src:t(m(o)[s.value].gallery),alt:"Название товара",ref_for:!0,ref:"img",hidden:s.value!==d},null,8,se))),128))]),e("ul",oe,[(i(!0),c(S,null,C(m(o),(u,d)=>(i(),c("li",{key:u.id,class:"pics__item"},[e("a",{href:"",class:x(["pics__link",d===s.value?"pics__link--current":""])},[e("img",{width:"98",height:"98",src:t(u.gallery),alt:u.color.title,onClick:z(f=>s.value=d,["prevent"])},null,8,le)],2)]))),128))])]))}},ae={class:"item__desc"},ie={class:"tabs"},re={class:"tabs__item"},ce={class:"tabs__item"},ue=["hidden"],_e=E("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),de=[_e],me=["hidden"],ve=e("h3",null,"Доставка:",-1),pe=e("p",null,[b(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),b(" 2. Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")],-1),he=e("h3",null,"Возврат:",-1),be=e("br",null,null,-1),fe=e("br",null,null,-1),ge=e("br",null,null,-1),$e={__name:"ProductInfo",setup(r){const l=v("about");function o(t){return l.value===t}function s(t){l.value=t}return(t,n)=>(i(),c("div",ae,[e("ul",ie,[e("li",re,[e("a",{class:x(["tabs__link",{"tabs__link--current":o("about")}]),onClick:n[0]||(n[0]=z(a=>s("about"),["prevent"]))}," Информация о товаре ",2)]),e("li",ce,[e("a",{class:x(["tabs__link",{"tabs__link--current":o("delivery")}]),onClick:n[1]||(n[1]=z(a=>s("delivery"),["prevent"]))}," Доставка и возврат ",2)])]),e("div",{class:"item__content",hidden:!o("about")},de,8,ue),e("div",{class:"item__content",hidden:!o("delivery")},[ve,pe,he,e("p",null,[b(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),be,b(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),fe,b(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону "+p(m(q)),1),ge])],8,me)]))}},ke=["value"],ye={__name:"ProductSizeSelect",props:["sizeList","modelValue"],emits:["update:modelValue"],setup(r,{emit:l}){const o=r;console.log(o.sizeList);const s=k({get(){return o.modelValue},set(t){l("update:modelValue",t)}});return(t,n)=>V((i(),c("select",{class:"form__select",name:"category","onUpdate:modelValue":n[0]||(n[0]=a=>L(s)?s.value=a:null)},[(i(!0),c(S,null,C(r.sizeList,a=>(i(),c("option",{value:a.id,key:a.id},p(a.title),9,ke))),128))],512)),[[F,m(s)]])}},Ve={class:"form__counter"},Se={symbol:"icon-minus",size:"12 12"},Ce={symbol:"icon-plus",size:"12 12"},ze={__name:"ProductCounter",props:["modelValue"],emits:["update:modelValue"],setup(r,{emit:l}){const o=r,s=k({get(){return o.modelValue},set(a){l("update:modelValue",a)}});function t(){s.value+=1}function n(){s.value!==1&&(s.value-=1)}return(a,u)=>{const d=K("svg");return i(),c("div",Ve,[e("button",{type:"button","aria-label":"Убрать один товар",onClick:n},[V((i(),c("svg",Se,null,512)),[[d]])]),V(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>L(s)?s.value=f:null),name:"count"},null,512),[[H,m(s)]]),e("button",{type:"button","aria-label":"Добавить один товар",onClick:t},[V((i(),c("svg",Ce,null,512)),[[d]])])])}}};class we{constructor({id:l,color:o,size:s}){y(this,"_id");y(this,"_color");y(this,"_size");this._id=l,this._color=o,this._size=s}toString(){return`${this._id.toString().padStart(3,"0")}${this._color.toString().padStart(2,"0")}${this._size.toString().padStart(2,"0")}`}}const xe={class:"content container"},Pe={class:"content__top"},Ie={key:1,class:"item"},Be={class:"item__info"},Le={class:"item__code"},Ne={class:"item__title"},Ue={class:"item__form"},Te={class:"form",action:"#",method:"POST"},Ae={class:"item__row item__row--center"},De={class:"item__price"},Oe={class:"item__row"},Re={class:"form__block"},Me=e("legend",{class:"form__legend"},"Цвет",-1),je={class:"form__block"},qe=e("legend",{class:"form__legend"},"Размер",-1),Ee={class:"form__label form__label--small form__label--select"},Fe=["onClick"],Je={__name:"ProductView",emits:["loadingStart","loadingComplete"],setup(r,{emit:l}){const o=G(),s=v(!0),t=v({}),n=v(),a=v(),u=v(1),d=k(()=>t.value&&a.value&&n.value?new we({id:t.value.id,color:a.value,size:n.value}):""),f=v([]),N=J(),w=k(function(){return t.value.colors||[]});U();async function U(){s.value=!0,l("loadingStart"),t.value=await P.getProductById(N.params.id),f.value=[{title:"Каталог",route:{name:"main"}},{title:t.value.category.title,route:{name:"products",query:{categoryId:t.value.category.id}}},{title:t.value.title,route:{path:"#"}}],n.value=t.value.sizes[0].id,a.value=t.value.colors[0].id,console.log("color",a.value),s.value=!1,l("loadingComplete")}function T(){var g;P.addProductToBasket({productId:t.value.id,colorId:A(a.value),sizeId:n.value,quantity:u.value},(g=o.user)==null?void 0:g.accessKey).then(_=>{Object.assign(o.cart,_),o.user=o.cart.user})}function A(g){return w.value.find(_=>_.id===g).color.id}return(g,_)=>(i(),c("main",xe,[e("div",Pe,[h(Z,{links:f.value},null,8,["links"])]),s.value?(i(),B(W,{key:0})):I("",!0),s.value?I("",!0):(i(),c("section",Ie,[h(ne,{colors:m(w),selected:a.value,loading:s.value},null,8,["colors","selected","loading"]),e("div",Be,[e("span",Le,"Артикул: "+p(m(d)),1),e("h2",Ne,p(t.value.title),1),e("div",Ue,[e("form",Te,[e("div",Ae,[h(ze,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=$=>u.value=$)},null,8,["modelValue"]),e("b",De,p(t.value.price)+" ₽ ",1)]),e("div",Oe,[e("fieldset",Re,[Me,h(Q,{colors:m(w),modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=$=>a.value=$)},null,8,["colors","modelValue"])]),e("fieldset",je,[qe,e("label",Ee,[h(ye,{"size-list":t.value.sizes,modelValue:n.value,"onUpdate:modelValue":_[2]||(_[2]=$=>n.value=$)},null,8,["size-list","modelValue"])])])]),e("button",{class:"item__button button button--primery",type:"submit",onClick:z(T,["prevent"])}," В корзину ",8,Fe)])])]),h($e)]))]))}};export{Je as default};
